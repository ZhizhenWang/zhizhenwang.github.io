---
layout: post
title: "Vim终端编辑器"
date: 2019-04-25 18:24:55 +0100
tags: vi vim cheatsheet
categories: 技术
---
## 1. 打开文件
### 1.1 打开或者新建文件
- 在终端中输入`vi`**在后面跟上文件名** 即可
```
$ vi 文件名
```
- 如果文件已经存在，会直接打开文件
- 如果文件不存在，会创建一个文件

### 1.2 打开文件并定位
- 例如：开发中，知道某一行有错误，可以 **快速定位** 如初
- 这个时候，可以使用以下命令打开文件
```
$ vi 文件名 +行数
```
> 提示：如果只带上`+`而不指定行号，会直接定位到文件末尾

## 2. 工作模式

vi 有三种基本工作模式：
1. **命令模式**
    - 打开文件首先进入命令模式， 
    - 通过**命令**对文件进行常规的编辑操作，例如 **定位、翻页、复制、粘帖、删除**
2. **末行模式** -- 执行 保存退出 等操作
   - 末行模式是vi的出口
3. **编辑模式** -正常的编辑文字  
![workflow](/assets/image/20190425/workflow.jpg){:width="450px"}

### 2.1 末行模式命令

| 命令 | 英文         | 功能                           |
|------|--------------|--------------------------------|
| w    | write        | 保存                           |
| q    | quit         | 退出，如果没有保存，不允许退出 |
| q!   | quit         | 强行退出，不保存               |
| wq   | write & quit | 保存并退出                     |
| x    |              | 保存并退出                     |

## 3. 常用命令
### 命令线路图
1. 重复次数
    在命令模式下，**先输入一个数字，再跟上一个命令**，可以让**该命令重复执行制定次数**
2. 移动和选择
    - 定位到指定的代码行
    - **移动命令**和**编辑操作**可以组合使用
3. 编辑操作
    - 复制、粘帖、删除、替换、缩排
4. 撤销和重复
5. 查找替换

### 3.1 移动命令
#### 基本
1). 上、下、左、右

| h    | j    | k    | l      |
|------|------|------|--------|
| ←    | ↓    | ↑    | →      |
| 食指 | 食指 | 中指 | 无名指 |

2). 行内移动

| 命令 | 英文 | 功能                 |
|------|------|----------------------|
| w    | word | 向后移动一个单词     |
| b    | back | 向前移动一个单词     |
| 0    |      | 行首                 |
| ^    |      | 行首，第一个非空字符 |
| $    |      | 行尾                 |

3). 行数移动

| 命令          | 英文 | 功能                 |
|---------------|------|----------------------|
| gg            | go   | 文件顶部             |
| G             | go   | 文件末尾             |
| 数字gg/ 数字G | go   | 移动到 数字 对应行数 |
| :数字         |      | (末行模式) 同上      |

4.) 屏幕移动

| 命令     | 英文    | 功能     |
|----------|---------|----------|
| ctrl + b | back    | 向上翻页 |
| ctrl + f | forward | 向下翻页 |
| H        | Head    | 屏幕顶部 |
| M        | Middle  | 屏幕中间 |
| L        | Low     | 屏幕底部 |

#### 进阶
1). 段落移动
- 程序中不相关的代码会用**空格**分隔

| 命令          | 功能                 |
|---------------|----------------------|
| {            |上一段             |
| }            | 下一段             |

2). 切换左右括号
- 用于在当前光标行中找到光标 `()`、`[]`、`{}`，并在**成对**的左右括号间切换

| 命令          | 功能                 |
|---------------|----------------------|
| %           |定位当前行中的括号并切换 |

3). 标记
- 在开发时，某些代码可能需要**稍后处理**，例如：编辑、查看
- 此时可以用`m`增加一个标记，这样可以**在需要的时候快速跳转回来**
- 标记名称可以`a-z`或`A-Z`之间的任意一个字母
- **标记的行如果被删除，标记同时被自动删除**
- 如果在其他行添加了相同名称的标记，之前的标记会被替换

| 命令          | 英文 | 功能                 |
|---------------|------|----------------------|
| mx            | mark   | 添加标记x, x是a-zA-Z之间任意字母             |
| 'x             |    | 直接定位到标记x所在位置             |

### 3.2 选中命令（可视模式）
- 学习`编辑`命令前，先学会怎样**选中要复制的命令**
- 在`vi`中，用`visual`命令切换到可视模式
- vi可提供三种可视模式，方便选中文本
- 按`esc`可放弃选中，返回**命令模式**

| 命令     | 模式    | 功能     |
|----------|---------|----------|
| v | 可视模式    | 从光标开始位置选择文本 |
| V | 可视行模式| 光标经过的完整行 |
| ctrl+v        |可视块（垂直）模式 | 垂直方向选择文本 |

- 可视模式下，可以和**移动命令**连用，例如：  
`ggVG` 能够选中所有内容  
`V}` 能够选择至空行以上的所有行

### 撤销和删除
### 复制和粘贴
### 替换命令
### 缩排以及重复执行
### 查找字符串或者单词
### 查找并替换
### 进入编辑模式的6个命令
### 分屏命令
